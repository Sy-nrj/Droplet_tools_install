#! /bin/bash

mkdir -p ./$DOMAIN/status_code

# Using httpx
cat ./$DOMAIN/resolved/dnsx_resolved.txt | httpx -status-code -o ./$DOMAIN/status_code/httpx_status_codes.txt

# Using massscan
massscan -p80,443 -iL ./$DOMAIN/resolved/dnsx_resolved.txt --rate=1000 -oG ./$DOMAIN/status_code/massscan_live.txt

# Categorize the status Codes
grep " 2" ./$DOMAIN/status_code/httpx_status_codes.txt > ./$DOMAIN/status_code/20x_apps.txt
grep " 3" ./$DOMAIN/status_code/httpx_status_codes.txt > ./$DOMAIN/status_code/30x_apps.txt
grep " 4" ./$DOMAIN/status_code/httpx_status_codes.txt > ./$DOMAIN/status_code/40x_apps.txt
grep " 5" ./$DOMAIN/status_code/httpx_status_codes.txt > ./$DOMAIN/status_code/50x_apps.txt
