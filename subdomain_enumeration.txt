#!/bin/bash

now=$(date)

DOMAIN=$1
OUTPUT_DIR="./$DOMAIN/subdomains"
mkdir -p /$OUTPUT_DIR 

# Passive enumeration
subfinder -d $DOMAIN -all -silent | tee $OUTPUT_DIR/subfinder_subdomains.txt
amass enum -passive -d $DOMAIN -o $OUTPUT_DIR/amass_subdomains.txt
assetfinder --subs-only $DOMAIN | tee $OUTPUT_DIR/assetfinder_subdomains.txt
sublist3r -d $DOMAIN -o $OUTPUT_DIR/sublist3r_subdomains.txt
gau --subs $DOMAIN | tee $OUTPUT_DIR/gau_subdomains.txt
gospider -s $DOMAIN -o $OUTPUT_DIR/gospider_subdomains.txt

cat $OUTPUT_DIR/*_subdomains.txt | sort -u > $OUTPUT_DIR/all_subs.txt


#curl -s "https://crt.sh/?q=%25.$DOMAIN&output=json" | jq -r '.[].name_value' | tee $OUTPUT_DIR/crtsh_subdomains.txt
